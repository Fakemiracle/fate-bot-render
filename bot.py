import os
import random
import asyncio

from flask import Flask, request
from aiogram import Bot, Dispatcher, F
from aiogram.client.default import DefaultBotProperties
from aiogram.filters import CommandStart, Command
from aiogram.types import (
    Message,
    InlineQuery,
    InlineQueryResultArticle,
    InputTextMessageContent,
    Update,
)

API_TOKEN = os.getenv("TG_BOT_TOKEN")  # –Ω–∞ Render –∑–∞–¥–∞–¥–∏–º –≤ ENV
WEBHOOK_SECRET = os.getenv("WEBHOOK_SECRET", "super_secrtcat")

WEBHOOK_URL_BASE = os.getenv("RENDER_EXTERNAL_URL", "http://localhost:8000")
WEBHOOK_URL = f"{WEBHOOK_URL_BASE}/{WEBHOOK_SECRET}"

USERS = [
    "@alaction47",
    "@Bone12th",
    "@Tamerlan69",
    "@Akim_I",
    "@Gerald_Wured",
    "–í—Å–µ–≤–æ–ª–æ–¥ –±–æ–ª—å—à–æ–µ –≥–Ω–µ–∑–¥–æ",
]

PHRASES_REP = [
    "–ü–û–î–°–û–°–û–ö –î–ù–Ø –†–ï–ü–´ {user}",
]

PHRASES_FATE = [
    "–ë–∞—Ä–∞–Ω–æ–≤ —É–º—Ä–µ—Ç —Å–µ–≥–æ–¥–Ω—è :(",
    "–¢–≤–æ—è —Å—É–¥—å–±–∞ —É–µ—Ö–∞—Ç—å –≤ –°–µ—Ä–≥–µ–µ–≤–∫—É –∏ –æ—Å—Ç–∞—Ç—å—Å—è —Ç–∞–º –∂–∏—Ç—å –Ω–∞ –≥–æ–¥",
    "–í—Å—ë, –ø–∏–∑–¥–µ—Ü. –ü—Ä—è–º–æ —Å–µ–π—á–∞—Å –µ–¥–µ–º –∫ –°–µ–≤–µ –∏–≥—Ä–∞—Ç—å –≤ –Ω–∞—Å—Ç–æ–ª–∫–∏. –ò–ª–∏ –∫–∞–∂–¥—ã–π –¥–µ–ª–∞–µ—Ç —Å–∞–ª—å—Ç–æ-–∞—Ç–∞—á–∫—É —á–µ—Ä–µ–∑ –∫–æ—Å—Ç–µ—Ä",
    "–¢–≤–æ—è –∏–Ω—Ç—Ä–∏–∂–∫–∞ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è —Å–µ–≥–æ–¥–Ω—è :(",
    "–¢—ã –ø—Ä–æ–µ–±–µ—à—å —Å–µ–≥–æ–¥–Ω—è –≤—Å–µ —Å–≤–æ–∏ –∫—É–±–∫–∏ –≤ –∫–ª–µ—à–∫–µ :<",
    "–†—ã–±–∞–ª–æ—á–∫–∞ —Å–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç –∑–Ω–∞—Ç–Ω–∞—è, –ø–æ —ç—Ç–æ–º—É —Ö–≤–∞—Ç–∏—Ç —á–µ—Å–∞—Ç—å —è–π—Ü–∞ –∏ –ª—É—á—à–µ —Å–¥–µ–ª–∞–π —Å–∞–ª—å—Ç–æ-–∞—Ç–∞—á–∫—É —á–µ—Ä–µ–∑ –∫–æ—Å—Ç–µ—Ä",
    "–¢–µ–±–µ –ø–æ–≤–µ–∑–ª–æ, —Ç—ã —Å–µ–≥–æ–¥–Ω—è –ø—Ä–æ—Å—Ç–æ –æ–±–æ—Å—Ä–µ—à—å —Å–≤–æ–∏ —Ç—Ä—É—Å—ã –≤–æ —Å–Ω–µ",
    "–¢–µ–±–µ –Ω–µ –ø–æ–≤–µ–∑–ª–æ, —Ç—ã —É–µ–∑–∂–∞–µ—à—å –∂–∏—Ç—å –≤ –°–µ—Ä–≥–µ–µ–≤–∫—É",
    "–°–∞–¥–∏—Å—å —Å–µ–≥–æ–¥–Ω—è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ, —É—á–µ–Ω–∏–∫–∏ –º–æ–≥—É—Ç –ø–æ–¥–ª–æ–∂–∏—Ç—å —Ñ–µ–π–∫–æ–≤—ã–π —á–ª–µ–Ω",
    "–•–≤–∞—Ç–∏—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Ö—É–π–Ω–µ–π, —Å–æ–±–∏—Ä–∞–π –≤–µ—â–∏ –∏ –µ–¥—å –Ω–∞ –≤–∞—Ö—Ç—É!",
    "–ú–∞–∫—Å–∏–º –±—É–¥–µ—Ç —Å–µ–≥–æ–¥–Ω—è –¥—Ä–∞—Ç—å—Å—è –∑–∞ —á–µ–∫—É—à–∫—É —Å –º–µ—Å—Ç–Ω—ã–º —Ä—ç–º–±–æ –ö–ë",
    "–í —ç—Ç—É –Ω–µ–¥–µ–ª—é –ß–∏–≥–∏—Ä–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—Ç –∫ –≥–æ—Ä–æ–¥—É",
    "–¢–≤–æ—é –∑–∞—Ä–ø–ª–∞—Ç—É –≤—ã–ø–ª–∞—Ç—è—Ç {user}",
    "–°–µ–≥–æ–¥–Ω—è —Ç—ã –±—É–¥–µ—à—å —Å–æ—Å–∞—Ç—å –±—É–±–µ",
    "–ü–æ–¥–µ—Ä–∏—Å—å —Å–≤–æ–∏–º —á–µ—Ä–≤—è–∫–æ–º —Å {user}",
    "–û—Ç—Ä–∞–≤–∏—à—å—Å—è —Å–∞–º—Å–æ–π :(",
    "–ó–∞—Ö—É—è—Ä—å –±—É—Ç—ã–ª–∫—É –≤ –≥–æ–ª–æ–≤—É {user}",
    "–°–µ–≥–æ–¥–Ω—è —Ç—ã –≤—ã–±—å–µ—à—å –ø–ª–∞—Ç–∏–Ω—É, –æ–±–æ—Å—Ä–µ—à—å—Å—è –ø—Ä—è–º–æ –Ω–∞ —É—Ä–æ–∫–µ",
    "–ë—É–¥—å —á–µ–ª–æ–≤–µ–∫–æ–º, –ø–æ–º–æ–≥–∏ –∑–∞–≥–∞–ª—è–µ–≤–∫–µ –¥–µ–Ω—å–≥–∞–º–∏",
    "–¢—ã –ø–æ–¥—Å–∫–æ–ª—å–∑–Ω–µ—à—å—Å—è –Ω–∞ —Å–∞–º—Å–µ, —Å–º–æ—Ç—Ä–∏ –ø–æ–¥ –Ω–æ–≥–∏",
    "–°–ª–∞–≤–∏–∫ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç —Ç–µ–±—è –Ω–∞ —á–∞–π, –Ω–æ –±—É–¥–µ—Ç —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω —Ç–≤–æ–∏–º —Ö—É–µ–º –≤ 4 —Å–º",
    "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç–µ–±–µ –ø–æ–≤–µ–∑–ª–æ, —Ç–µ–±—è –±–ª–∞–≥–æ—Å–ª–æ–≤–∏–ª –°–æ–ª–æ–¥!!!",
    "–•–≤–∞—Ç–∏—Ç —É–∂–µ —Å—Ç—Ä–∞–¥–∞—Ç—å —Ö—É–π–Ω–µ–π, —Ç–µ–±–µ –ø–æ—Ä–∞ —Å–æ–±–∏—Ä–∞—Ç—å –≤–µ—â–∏ –∏ –∏–¥—Ç–∏ –æ—Ç–¥–∞–≤–∞—Ç—å —á–µ—Å—Ç—å —Ä–æ–¥–∏–Ω–µ!",
    "–°–∞–ª—å—Ç–æ-–∞—Ç–∞—á–∫–∞ —á–µ—Ä–µ–∑ —Å–∞–º—Å—É, –∏–ª–∏ –±—É–¥–µ—à—å –ø—Ä–æ–∫–ª—è—Ç –≤ –≤–µ–∫–∞—Ö",
    "–°–µ–≥–æ–¥–Ω—è —Ç–µ–±–µ –ø–µ—Ä–¥–µ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –Ω–µ–ª—å–∑—è, –∏–Ω–∞—á–µ –æ–±–∂–∏–∂–∏—à—å —Å–≤–æ–∏ –ª—é–±–∏–º—ã–µ —Ç—Ä—É—Å—ã",
    "–≠—Ö, –∂–∞–ª—å —á—Ç–æ —Ç—ã —Ä–æ–¥–∏–ª—Å—è –Ω–µ –≤ —Å–æ–≤–∫–µ, —Ç–∞–º —Ç–µ–±—è —Ç–æ—á–Ω–æ –≤—ã–µ–±–∞–ª–∏ –±—ã –≤ –∂–æ–ø—É!",
    "–ù–µ –≥—Ä—É—Å—Ç–∏, –≤—Å–µ –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ!",
    "–¢—ã —É–ø–∞–¥–µ—à—å —Å–µ–≥–æ–¥–Ω—è –≥—É–±–∞–º–∏ –Ω–∞ —á–ª–µ–Ω, –≤–æ–∑–º–æ–∂–Ω–æ —Ñ–µ–π–∫–æ–≤—ã–π",
    "–í–æ–∑—å–º–∏ —Å–µ–±–µ –ø–∏–≤–∞ —Å–µ–≥–æ–¥–Ω—è –∏ —Ä–∞—Å—Å–ª–∞–±—å—Å—è",
    "–°–µ–≥–æ–¥–Ω—è –∂–µ –ø–æ–¥–∞–≤–∞–π –∑–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ —Ç—É—Ä–Ω–∏—Ä–µ –ë–∏—Ç–≤–∞ –∑–∞ —á–µ–∫—É—à–∫—É!",
    "–ë—ã—Ç—å —É—á–∏—Ç–µ–ª–µ–º - –∑–Ω–∞—á–∏—Ç –±—ã—Ç—å –±–µ–¥–Ω—ã–º, —Ç—É—Ç –Ω–∏–∫–∞–∫–∏–µ —à—É—Ç–∫–∏ –Ω–µ –ø–æ–º–æ–≥—É—Ç",
    "–£–≤–æ–ª—å–Ω—è–π—Å—è –∏ –∏–¥–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ß–∏–≥–∏—Ä–∏–Ω—Å–∫—É—é –∫–æ—á–µ–≥–∞—Ä–∫—É",
    "–°–µ–≥–æ–¥–Ω—è –≤–µ–ª–∏–∫–∏–π –¥–µ–Ω—å, –ó–∞–≥–∞–ª—è–µ–≤–∫–∞ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –±—ã—Ç—å —Ç–∞–∫–æ–π –±–µ–¥–Ω–æ–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –µ—ë –∑–∞—Ö–≤–∞—Ç—è—Ç –ß–∏–≥–∏—Ä–∏",
    "–ó–∞–≥–∞–ª—è–µ–≤—Å–∫–∏–µ –±–æ–º–∂–∏ –Ω–∞—Å—Ç–æ–ª—å–∫–æ —Å—É—Ä–æ–≤—ã, —á—Ç–æ –∫–æ–≥–¥–∞ –∏–º –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –ø–æ–π—Ç–∏ –≤ –ø—Ä–∏—é—Ç, –æ–Ω–∏ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç: ¬´–ê Wi-Fi —Ç–∞–º –µ—Å—Ç—å? –ê —Ç–æ –∞–¥ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –º—ã —É–∂–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏.¬ª",
    "–ù–µ –∑–∞—Ö–æ–¥–∏ —Å–µ–≥–æ–¥–Ω—è –≤ –ó–∞–≥–∞–ª—è–µ–≤–∫—É, —Ç–µ–±—è —Å–≥—Ä—ã–∑—É—Ç —Å–æ–±–∞–∫–∏",
    "–°—Ä–æ—á–Ω–æ –Ω—É–∂–Ω–æ –µ—Ö–∞—Ç—å –≤ –°–µ—Ä–≥–µ–µ–≤–∫—É, —Å–µ–≥–æ–¥–Ω—è —Ç–∞–º —Ñ–µ—Å—Ç–∏–≤–∞–ª—å —Å–∞–º–æ–≥–æ–Ω–∞! –í –ø—Ä–∏–Ω—Ü–∏–ø–µ –æ–Ω —Ç–∞–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å",
    "–°–µ–≥–æ–¥–Ω—è —Ç—ã –ø–æ–π–º–∞–µ—à—å –æ–≥—Ä–æ–º–Ω—É—é —â—É–∫—É! –ù–æ —Ä—ã–±–∞—á–∏—Ç—å –Ω—É–∂–Ω–æ –Ω–∞ —Ö—É–π {user}",
    "–¢–µ–ª–µ–≥—Ä–∞–º–º –Ω–∞—á–∞–ª–∏ –∑–∞–º–µ–¥–ª—è—Ç—å, –≤–µ–¥—å —É –ó–∞–≥–∞–ª—è–µ–≤—Å–∫–∏—Ö –ø–æ—è–≤–∏–ª—Å—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç",
    "–¢—ã —Ö–∞—Ä–∫–Ω—É–ª –≤ –±–∞–ª–∞–Ω–¥—É {user}",
    "–•—É–µ–≤—ã–π —Å–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å, –°–µ—Ä–≥–µ–µ–≤–∫–∞ –¥–æ —Å–∏—Ö –ø–æ—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç",
    "–•—É–µ–≤—ã–π —Å–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å, –ß–∏–≥–∏—Ä–∏ –¥–æ —Å–∏—Ö –ø–æ—Ä —Å—É—â–µ—Å—Ç–≤—É—é—Ç",
    "–•—É–µ–≤—ã–π —Å–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å, –ó–∞–≥–∞–ª—è–µ–≤–∫–∞ –¥–æ —Å–∏—Ö –ø–æ—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç",
    "–ö–æ–∑–∞–∫ –ø–æ–ø—Ä–æ—Å–∏—Ç —Ç–µ–±—è –≤—Å—Ç—É–ø–∏—Ç—å –≤ —Å–≤–æ—é –û–ü–ì, —Å–æ–≥–ª–∞—à–∞–π—Å—è",
    "–ß—Ç–æ–∂, —Ç—ã —Å–µ—Ä—ã–π —É–µ–±–∞–Ω –∏ —ç—Ç–æ —Ñ–∞–∫—Ç",
    "–ß—Ç–æ–∂, —Ç—ã –Ω–∞—Å—Ç–æ—è—â–∏–π —Ä–∞—Å–∏—á! –•—É–π —Ç–µ –≤ –∂–æ–ø—É",
    "–ü—Ä–æ—Å—Ç–æ –≤—ã–π–ø–µ–π –±—É—Ç—ã–ª–∫—É –≤–æ–¥–∫–∏, –∑–∞–∫—É—Å–∏ —Å–∞–º—Å–æ–π, —Å—Ç–∞–Ω–µ—Ç –ª–µ–≥—á–µ",
    "–°–µ–≥–æ–¥–Ω—è —Ç–≤–æ—è –∞—É—Ä–∞ –ø–∞—Ö–Ω–µ—Ç –ø–µ—Ä–µ–≥–∞—Ä–æ–º –∏ –±–µ–∑—ã—Å—Ö–æ–¥–Ω–æ—Å—Ç—å—é ‚Äî –∂–¥–∏ –≥–æ—Å—Ç–µ–π –∏–∑ –ß–∏–≥–∏—Ä–µ–π.",
    "–°–µ–≤–µ –ø—Ä–∏—Å–Ω–∏—Ç—Å—è —Ç—ã, –Ω–æ –≤ –æ–±–ª–∏–∫–µ —Å–∞–º—Å—ã. –ù–∞—Å—Ç–æ—è—â–∞—è –º–∏—Å—Ç–∏–∫–∞, –±—Ä–∞—Ç.",
    "–ó–∞–≥–∞–ª—è–µ–≤—Å–∫–∏–µ –¥–µ—Ç–∏ —Å–Ω–æ–≤–∞ –Ω–∞—à–ª–∏ –¥—Ä–µ–≤–Ω–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç ‚Äî —Ä–µ–∑–∏–Ω–æ–≤—ã–π —Ñ–∞–ª–æ—Å —Ç–≤–æ–µ–≥–æ –ø—Ä–∞–¥–µ–¥–∞",
    "–°–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å –≤–µ–ª–∏–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π: –∏–ª–∏ —É–≤–æ–ª—å–Ω–µ–Ω–∏–µ, –∏–ª–∏ –∏–Ω—Ñ–∞—Ä–∫—Ç, –≤—ã–±–∏—Ä–∞–π —Å —É–º–æ–º.",
    "–¢–≤–æ—é —Å—É–¥—å–±—É —Ä–µ—à–∏—Ç –º–æ–Ω–µ—Ç–∫–∞‚Ä¶ –ö–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç, —Ç—ã –ø—Ä–æ–∏–≥—Ä–∞–ª –µ—â—ë –≤ –ø—Ä–æ—à–ª–æ–º –≤–µ–∫–µ.",
    "–ï—Å–ª–∏ —É—Ç—Ä–æ–º –∑–∞–æ—Ä–µ—Ç –ø–µ—Ç—É—Ö ‚Äî –≥–æ—Ç–æ–≤—å—Å—è, —Å–µ–≥–æ–¥–Ω—è —Ç—ã –ø–µ—Ç—É—Ö –¥–Ω—è.",
    "–°–µ—Ä–≥–µ–µ–≤–∫–∞ —Å–µ–≥–æ–¥–Ω—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–∏–∑–Ω–∞–Ω–∞ —Å—Ç–æ–ª–∏—Ü–µ–π –æ—Ç—á–∞—è–Ω–∏—è. –ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –º—ç—Ä.",
    "–¢–≤–æ—è —Ä—ã–±–∞–ª–∫–∞ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è —Ç—Ä–∞–≥–µ–¥–∏–µ–π ‚Äî —â—É–∫–∞ –æ–∫–∞–∂–µ—Ç—Å—è –æ–ø—ã—Ç–Ω–µ–µ —Ç–µ–±—è –≤ –∂–∏–∑–Ω–∏.",
    "–°–ª–∞–≤–∏–∫ –Ω–∞–∫–æ–Ω–µ—Ü –Ω–∞—à—ë–ª —Å–º—ã—Å–ª –∂–∏–∑–Ω–∏ ‚Äî –≤ —á–µ–∫—É—à–∫–µ, –∫–æ—Ç–æ—Ä—É—é —Ç—ã –¥–æ–ª–∂–µ–Ω –µ–º—É –∫—É–ø–∏—Ç—å, –∑–∞ –≤—Å–µ –æ–±–∏–¥—ã.",
    "–ë—É–±–∞ –æ–±—ä—è–≤–ª–µ–Ω –ø—Ä–æ—Ä–æ–∫–æ–º –ó–∞–≥–∞–ª—è–µ–≤–∫–∏. –ï–≥–æ –ø–µ—Ä–≤–æ–µ —á—É–¥–æ ‚Äî –º–∏–Ω—É—Å –¥–≤–µ –∑–∞—Ä–ø–ª–∞—Ç—ã —É –≤—Å–µ—Ö.",
    "–ë—É–±–∞ –æ–±—ä—è–≤–ª–µ–Ω –ø—Ä–æ—Ä–æ–∫–æ–º –°–µ—Ä–≥–µ–µ–≤–∫–∏. –ï–≥–æ –ø–µ—Ä–≤–æ–µ —á—É–¥–æ ‚Äî –º–∏–Ω—É—Å –¥–≤–µ –∑–∞—Ä–ø–ª–∞—Ç—ã —É –≤—Å–µ—Ö.",
    "–ë—É–±–∞ –æ–±—ä—è–≤–ª–µ–Ω –ø—Ä–æ—Ä–æ–∫–æ–º –ß–∏–≥–∏—Ä–µ–π. –ï–≥–æ –ø–µ—Ä–≤–æ–µ —á—É–¥–æ ‚Äî –º–∏–Ω—É—Å –¥–≤–µ –∑–∞—Ä–ø–ª–∞—Ç—ã —É –≤—Å–µ—Ö.",
    "–°–µ–≥–æ–¥–Ω—è –≤—Å—ë –ø—Ä–æ—Å—Ç–æ: –ø—Ä–æ—Å–Ω—É–ª—Å—è ‚Äî —É–∂–µ –≤—ã–∂–∏–ª. –û—Å—Ç–∞–ª—å–Ω–æ–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.",
    "–¢–≤–æ—ë —Å—á–∞—Å—Ç—å–µ –∏–¥—ë—Ç –∫ —Ç–µ–±–µ, –Ω–æ –∑–∞–ø–ª—É—Ç–∞–ª–æ –≤ –°–µ—Ä–≥–µ–µ–≤–∫–µ —É–∂–µ –ø—è—Ç—ã–π –≥–æ–¥.",
    "–°–µ–≥–æ–¥–Ω—è —Ç—ã –ø–æ—á—Ç–∏ –≥–µ—Ä–æ–π. –ü–æ—á—Ç–∏ ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–ø–æ—Ç–∫–Ω—É–ª—Å—è –æ —Å–≤–æ—é –∂–∏–∑–Ω—å.",
    "–ë—É–¥—å –≥–æ—Ç–æ–≤: –≤–µ—á–µ—Ä–æ–º –ø—Ä–∏–µ–¥–µ—Ç –∫–æ–º–∏—Å—Å–∏—è –∏–∑ –∞–¥–∞. –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–≤–æ—é –º–æ—Ç–∏–≤–∞—Ü–∏—é.",
    "–í –°–µ—Ä–≥–µ–µ–≤–∫–µ –æ–±—ä—è–≤–∏–ª–∏ –ß–°: –∫—Ç–æ-—Ç–æ —Å–ª—É—á–∞–π–Ω–æ –Ω–∞—à—ë–ª —Ä–∞–±–æ—Ç—É.",
    "–í –ó–∞–≥–∞–ª—è–µ–≤–∫–µ –æ–±—ä—è–≤–∏–ª–∏ –ß–°: –∫—Ç–æ-—Ç–æ —Å–ª—É—á–∞–π–Ω–æ –Ω–∞—à—ë–ª —Ä–∞–±–æ—Ç—É.",
    "–ñ–µ–Ω–µ –ø—Ä–∏—Å–Ω–∏—à—å—Å—è –≥–æ–ª—ã–º, –µ–º—É —ç—Ç–æ –Ω–µ –ø–æ–º–µ—à–∞–µ—Ç –Ω–∞–¥—Ä–æ—á–∏—Ç—å —Å–≤–æ–π —Ö—É–π",
    "–ï—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è –∫—Ç–æ-—Ç–æ –∫—Ä–∏–∫–Ω–µ—Ç ¬´–ë–ê–†–ê–ù–û–í!¬ª, –Ω–µ –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Å—è ‚Äî —É–¥–∞—á–∞ –Ω–µ –ª—é–±–∏—Ç –∂–µ—Ä—Ç–≤.",
    "–†—ã–±–∞–∫–∏ —à–µ–ø—á—É—Ç, —á—Ç–æ —Ç—ã —Å–µ–≥–æ–¥–Ω—è –æ–±–æ—Å—Ä—ë—à—å—Å—è –Ω–µ –∑—Ä—è ‚Äî –∑–Ω–∞–∫ –±–æ–ª—å—à–æ–≥–æ —É–ª–æ–≤–∞.",
    "–¢–≤–æ—ë –±—É–¥—É—â–µ–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Å–∞–º—Å—É: —Å–Ω–∞—Ä—É–∂–∏ –≥–æ—Ä—è—á–æ, –≤–Ω—É—Ç—Ä–∏ —Ç—ã –ú–∞–∫—Å",
    "{user} –ø–æ–ø—Ä–æ—Å–∏—Ç —É —Ç–µ–±—è —Å–æ–≤–µ—Ç–∞. –ù–µ –¥–∞–≤–∞–π ‚Äî —Ç–∞–∫ –≤—ã –æ–±–∞ –≤—ã–∂–∏–≤–µ—Ç–µ.",
    "–ñ–µ–Ω—è —Ä–µ—à–∏—Ç –±—Ä–æ—Å–∏—Ç—å –ø–∏—Ç—å —á–µ—Ä–µ–∑ –ø—è—Ç—É—é –ø–æ–ø—ã—Ç–∫—É –æ—Ç–∫—Ä—ã—Ç—å –±—É—Ç—ã–ª–∫—É –∑—É–±–∞–º–∏.",
    "–ê–∫–∏–º —Å–µ–≥–æ–¥–Ω—è –ø–æ–ª—É—á–∏—Ç –∑–Ω–∞–∫ —Å—É–¥—å–±—ã ‚Äî –≤—ã–≥–æ–≤–æ—Ä –æ—Ç –∑–∞–≤—É—á–∞ –∏ –ø–∏–∑–¥—é–ª–µ–π –æ—Ç –∫–æ—Ç–∞",
    "–ó–∞–≥–∞–ª—è–µ–≤—Å–∫–∏–µ –∑–≤—ë–∑–¥—ã —Å–µ–≥–æ–¥–Ω—è —Å–≤–µ—Ç—è—Ç —è—Ä–∫–æ‚Ä¶ –ø–æ—Ç–æ–º—É —á—Ç–æ –ú–∞–∫—Å –æ–ø—è—Ç—å –ø—Ä–æ–¥–∞–ª —Ñ–æ–Ω–∞—Ä–∏.",
    "–ê–∫–∏–º –ø–æ–ª—É—á–∏—Ç —Å–º—Å –æ—Ç –≤—Å–µ–ª–µ–Ω–Ω–æ–π: ¬´–ü–µ—Ä–µ—Å—Ç–∞–Ω—å —É–∂–µ —Å—Ç—Ä–∞–¥–∞—Ç—å —Ö—É–π–Ω—ë–π¬ª.",
    "–õ–µ—à–∞ —Å–µ–≥–æ–¥–Ω—è –≤—Å—Ç–∞–Ω–µ—Ç –Ω–µ —Å —Ç–æ–π –Ω–æ–≥–∏ ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—Ç–æ—Ä—É—é –≤—á–µ—Ä–∞ –æ—Ç–¥–∞–≤–∏–ª —Ç—Ä–∞–∫—Ç–æ—Ä.",
    "–°–µ–≥–æ–¥–Ω—è –≤ –ß–∏–≥–∏—Ä—è—Ö –ø—Ä–æ–π–¥—ë—Ç —Ñ–µ—Å—Ç–∏–≤–∞–ª—å –æ—Ç—á–∞—è–Ω–∏—è ‚Äî –°—ë–º–∞, –∫–∞–∫ –≤—Å–µ–≥–¥–∞, –≤–µ–¥—É—â–∏–π.",
    "–ñ–µ–Ω—è –ø–æ–ª—É—á–∏—Ç –ø—Ä–µ–º–∏—é ‚Äò–ó–∞ –≤—ã–∂–∏–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏‚Äô. –î–µ–Ω–µ–≥ –Ω–µ –¥–∞–¥—É—Ç, –Ω–æ –ø–æ—Ö–ª–æ–ø–∞—é—Ç.",
    "–ñ–µ–Ω—è —Å–µ–≥–æ–¥–Ω—è —É–∑–Ω–∞–µ—Ç —Å—É–¥—å–±—É ‚Äî –∏ —É–∑–Ω–∞–µ—Ç, —á—Ç–æ –æ–Ω–∞ —Ç–æ–∂–µ –≤ –∑–∞–ø–æ–µ.",
    "–ú–∞–∫—Å —Å—Ç–∞–Ω–µ—Ç –≥–µ—Ä–æ–µ–º –ó–∞–≥–∞–ª—è–µ–≤–æ, —Å–ø–∞—Å—ë—Ç —á–µ–∫—É—à–∫—É –æ—Ç –∑–∞–º–µ—Ä–∑–∞–Ω–∏—è.",
    "–ï—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è –≤—Å—Ç—Ä–µ—Ç–∏—à—å –°–µ–≤—É ‚Äî –±–µ–≥–∏. –û–Ω —Å–Ω–æ–≤–∞ –∏—â–µ—Ç, –∫–æ–≥–æ –∑–∞—Ç–∞—â–∏—Ç—å –≤ –Ω–∞—Å—Ç–æ–ª–∫–∏ –∏ –∫—É–ª—å—Ç —Ä–∞—Å–∏—á–µ–π",
    "–£ –ê–∫–∏–º–∞ —Å–µ–≥–æ–¥–Ω—è —Å–ø–∏–∑–¥—è—Ç –∞–∫–∫–∞—É–Ω—Ç —Å—Ç–∏–º –∏ –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–¥—É—Ç –∫–∞–∫–æ–º—É —Ç–æ –∫–∏—Ç–∞–π—Ü—É –Ω–∞ —Ñ–∞–Ω–ø–µ–µ",
    "–ü–∏–¥–∞—Ä–∞—Å–∏—á –ø—Ä–∏—Å–Ω–∏—Ç—Å—è —Ç–µ–±–µ –≤–æ —Å–Ω–µ, –≥–¥–µ –ø–æ–º–æ—á–∏—Ç—Å—è —Ç–µ–±–µ –Ω–∞ –µ–±–ª–æ",
]

# =============== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===============

from aiogram.client.default import DefaultBotProperties

bot = Bot(
    API_TOKEN,
    default=DefaultBotProperties(parse_mode="HTML"),
)
dp = Dispatcher()
app = Flask(__name__)


@dp.message(CommandStart())
async def cmd_start(message: Message):
    await message.answer("–ü—Ä–∏–≤–µ—Ç! üôÇ")


@dp.message(Command("help"))
async def cmd_help(message: Message):
    text = (
        "–Ø –ø—Ä–æ—Å—Ç–æ–π NIGER.\n"
        "/start ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ\n"
        "/help ‚Äî —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ\n"
        "–ù–∞–ø–∏—à–∏ –ª—é–±–æ–π —Ç–µ–∫—Å—Ç ‚Äî —è –ø–æ–≤—Ç–æ—Ä—é –µ–≥–æ."
    )
    await message.answer(text)


@dp.message(F.text)
async def echo(message: Message):
    await message.answer(f"–¢—ã –Ω–∞–ø–∏—Å–∞–ª: {message.text}")


@dp.inline_query()
async def inline_handler(inline_query: InlineQuery):
    if USERS:
        random_user = random.choice(USERS)
    else:
        random_user = "@someone"

    phrase_rep = random.choice(PHRASES_REP)
    text_rep = phrase_rep.format(user=random_user)

    result_rep = InlineQueryResultArticle(
        id="random_user",
        title="–ü–æ–¥—Å–æ—Å–æ–∫ —Ä–µ–ø—ã –¥–Ω—è!",
        description="–ö–æ–º—É —Å–µ–≥–æ–¥–Ω—è –¥–æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ä–µ–ø–∞...",
        input_message_content=InputTextMessageContent(
            message_text=text_rep
        ),
    )

    phrase_fate = random.choice(PHRASES_FATE)
    text_fate = phrase_fate.format(user=random_user)

    result_fate = InlineQueryResultArticle(
        id="fate_today",
        title="–£–∑–Ω–∞–π —Å—É–¥—å–±—É –Ω–∞ —Å–µ–≥–æ–¥–Ω—è",
        description="–ì–ª–∞–≤–Ω–æ–µ –Ω–µ –æ–±–æ—Å—Ä–∞—Ç—å—Å—è",
        input_message_content=InputTextMessageContent(
            message_text=text_fate
        ),
    )

    await inline_query.answer(
        results=[result_rep, result_fate],
        cache_time=1,
        is_personal=True,
    )


@app.route(f"/{WEBHOOK_SECRET}", methods=["POST"])
def telegram_webhook():
    data = request.get_json()
    if not data:
        return "no data"

    update = Update.model_validate(data)

    async def process_update():
        await dp.feed_update(bot, update)

    asyncio.run(process_update())
    return "OK"


@app.route("/")
def index():
    return "Bot is running."


# –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ –ª–æ–∫–∞–ª—å–Ω–æ (–Ω–∞ PythonAnywhere –ª—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º)
if __name__ == "__main__":
    import requests

    # —Å—Ç–∞–≤–∏–º webhook
    requests.get(
        f"https://api.telegram.org/bot{API_TOKEN}/setWebhook",
        params={"url": WEBHOOK_URL},
    )

    app.run(host="0.0.0.0", port=8000)
